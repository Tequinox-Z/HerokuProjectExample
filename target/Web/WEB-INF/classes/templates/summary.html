<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finalizar pedido</title>
    <link rel="stylesheet" href="../CSS/styles.css"/>
</head>
<body>
       <nav>
    	<p id="titleNav">Finalizar pedido</p>
    	<img id="imgNav" src="../img/car.png" alt="Cerrar sesiÃ³n" title="Elimine los productos que no desea y rellene los datos de envÃ­o"></img>
    	<div id="actions">
			<img loading="lazy" id="user" alt="TÃº" src="../img/user.jpg" title="TÃº"/>
			<div class="hidden" id="optionsNav">
				<a href="../order/catalogue">
					<span>+</span> AÃ±adir productos
				</a>
				<a href="../orders">
					<span>ðŸ›’</span> Mis pedidos
				</a>
				<a id="exitLink" href="../login/exit">
					<span>ðŸšª</span> Cerrar sesiÃ³n
				</a>
			</div>
    	</div>
    </nav>
	<div id="mainContainer">
	<div id="viewNotProducts" th:if="${newOrder.getListDePedidos().size() == 0}">
		<img src="../img/withoutProduct.png" alt="No hay ningÃºn producto en el pedido">
		<h4>No hay productos</h4>
		<p>Elija al menos un producto</p>
	</div>
	<div id="viewOrderFinish" th:if="${newOrder.getListDePedidos().size() != 0}">
		<h4 class="title">Productos aÃ±adidos en el carrito</h4>
		<div id="listProduct">
			<div class="productInList" th:each="listPedido : ${newOrder.getListDePedidos()}">
				<img alt="Producto" th:src="'../img/products/' + ${listPedido.producto.imageUrl}"/>
				<div class="dataProduct">
					<h4 th:text="${listPedido.producto.name}"></h4>
					<p th:text="'Precio: ' + ${listPedido.producto.price} + 'â‚¬'"></p>
					<p th:text="'Cantidad: ' + ${listPedido.getCantidad()}"></p>
					<a th:href="'/order/summary/delete/' + ${listPedido.producto.ref}">
						<img class="delButtom" src="../img/delete.png" alt="'Eliminar ' + ${listPedido.producto.name} + ' del pedido'" th:title="'Eliminar ' + ${listPedido.producto.name} + ' del pedido'"/>
					</a>
				</div>
			</div>
		</div>
		<div id="dataOrder">
			<form id="formDataOrder" th:action="@{/order/finish}" method="post" th:object="${newOrder}">    			
    			<p id="textSummary">Selecciona tu mÃ©todo de envÃ­o</p>
    			<div id='sendMethodDiv'>
					<label>
						<input class="sendInput" name="sendMethod" th:field="*{sendMethod}" th:value="Express" type='radio'/>
						<img id="method1" class='method' alt ="EnvÃ­o rÃ¡pido" title='EnvÃ­o rapido' src='../img/method-fast.png'/>
					</label>
					<label>
						<input checked class="sendInput" th:field="*{sendMethod}" th:value="Normal" type='radio' name='sendMethod' value='normal'/>
						<img id="method2" class='method' alt="EnvÃ­o normal" title='EnvÃ­o normal' src="../img/normal.png"/>
					</label>
					<label>
						<input class="sendInput" type='radio' th:field="*{sendMethod}" th:value="Gratis" name='sendMethod' value='free'/>
						<img id="method3" class='method' name="sendMethod" alt="EnvÃ­o gratis" title='EnvÃ­o gratis' src='../img/free.png'/>
					</label>
				</div>
		
				<div id="dataForm" class="hidden">
				<label class="label">DirecciÃ³n</label>
    			<input type="text" class="inputData" th:field="*{address}"/>
    			
    			<label class="label">Correo</label>
    			<input type="text" class="inputData" th:field="*{email}"/>
    			
    			<span th:if="${#fields.hasErrors('email')}" th:errors="*{email}" id="id-error">Errores</span>
    			<label class="label">TelÃ©fono</label>
    			<input type="text" class="inputData" th:field="*{telefone}"/>	
    			
    			<input id="sendButton" type="submit" value="Realizar pedido"/>
				</div>			
				
   			</form>
		</div>
	</div>
	</div>
	<div th:if="${hasError}" th:text="${error}" id="mensaje">
	</div>
	<h4 th:if="${newOrder.getListDePedidos().size() != 0}" id="price" th:text="'Precio total: ' + ${totalAmount} + 'â‚¬'"></h4>
	<a href="/order/catalogue">
		<img id="backToMenu" alt="Volver al catÃ¡logo, no se guardarÃ¡n los datos introducidos" src="../img/catalogue-img.png" title="Volver al catÃ¡logo, no se guardarÃ¡n los datos del pedido"/>
	</a>
	<script src="../js/nav.js"></script>
	<script src="../js/summary.js"></script>
</body>
</html>